1. 사용자가 http://localhost:3000 에 접속
2. 3000번 서버는 사용자에게 HTML페이지를 보내주는데, 이미 여기에 <script src="gate.js"></script>와 <script src="http://localhost:4000/sdk.js"></script>가 포함되어 있음
3. 사용자의 브라우저가 HTML을 읽다가 4000번 서버에 sdk.js를 요청하고, 4000번 서버에서는 sdk.js를 브라우저로 보내줌
4. sdk.js가 실행되면서, 브라우저에는 광고위젯창(iframe)이 뜸
5. 그와 동시에 3000번 서버의 HTML에 있던 gate.js가 실행되면서, HTML Root 밑에서 MutationObserver가 동작중이게 됨
6. 사용자가 위젯의 "닫기 버튼"을 누르면, MutationOberver에서 위젯이 삭제된 것을 탐지하고, 이를 트리거로 삼아서 gate.js에서 심어둔 스크립트가 이번에는 injected.js를 호출함
7. gate.js에 의해서 호출된 injected.js도 마찬가지로 3000번 페이지의 Root 밑에 박혀 실행됨.
8. 실행되자마자 좌측하단에 침투성공 알림을 띄우고, 5000번 서버랑 연결되는 웹소켓을 생성함(말 그대로 스크립트 '주입'이기 때문에, 실행하는 스크립트 자체는 4000번 서버의 것이지만, 스크립트가 실행되는 장소는 3000번 서버의 HTML Root 밑이기 때문에, 웹소켓 또한 당연히 3000번이랑 5000번 사이에 생성됩니다.)
9. 웹소켓 생성 후에 ["최초보고", "키로거 콜백함수"]를 보냅니다.
10. 3000번의 index페이지에서 키를 입력하면, injected.js에서 이벤트리스너로 구현된 키로거에서 인식을해서 5000번 터미널로 키로그를 보냅니다.
11. CMD에서 키로그를 확인해보실 수 있습니다.
